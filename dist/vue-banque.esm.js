import{toRef as t,readonly as o,inject as e}from"vue";const n="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,r=t=>n?Symbol("[vue-banque]: "+t):"[vue-banque]: "+t,i=r("vue-banque"),s=r("No banque module was found, at least add one module in `modules` options"),u=r("Modifying property directly from Hook Store is not allowed"),c=r("hook-action"),a=r("banque-module"),l={globalName:"$banque",autoToRef:!0,strict:!0};function f(t,o,e){Object.defineProperty(t,o,{get:e})}function d(t){return"function"==typeof t}function p(t,o){const e={};return f(e,a.toString(),(()=>!0)),Object.keys(t).forEach((n=>{const r=d(t[n])?function(t,o){function e(...e){return t.apply(o,[o,...e])}return f(e,c.toString(),(()=>!0)),e}(t[n],o):t[n];e[n]=r})),e}function b(e,n){const{autoToRef:r,strict:i}=n,s=function(...t){return t.reduce(((t,o)=>(...e)=>o(t(...e))))}(r?(o,e)=>t(o,e):(t,o)=>t[o],i?t=>o(t):t=>t);return new Proxy(e,{get(t,o,e){const n=Reflect.get(t,o,e);return function(t){return d(t)&&t[c.toString()]}(n)?n:s(t,o)},set:()=>(console.warn(u.toString()),!1)})}class g{options;rootState;constructor(t){this.options=this.getOptions(t),this.rootState={},this.initModules()}getOptions(t){return Object.assign(l,t)}initModules(){const{modules:t}=this.options;t?Object.keys(t).forEach((o=>{const e=t[o];let n;if(null!==(r=e)&&"object"==typeof r)n=this.createModule(e);else if(d(e)){const t=e;n=this.createModule(t())}var r;n&&this.bindModule(o,n)})):console.warn(s.toString())}createModule(t){const{rootState:o,options:e}=this;return b(p(t,o),e)}bindModule(t,e){const{rootState:n}=this;return e[a.toString()]?(f(n,t,(()=>o(e))),n[t]):e}install(t){const{options:o}=this;f(t.config.globalProperties,o.globalName,(()=>this.rootState)),t.provide(i,this.rootState)}inject(){return e(i)}}function S(t){return new g(t)}export{S as createBanque};
//# sourceMappingURL=vue-banque.esm.js.map
