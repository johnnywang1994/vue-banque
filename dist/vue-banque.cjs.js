"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("vue");const o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,e=t=>o?Symbol("[vue-banque]: "+t):"[vue-banque]: "+t,n=e("vue-banque"),r=e("No banque module was found, at least add one module in `modules` options"),i=e("Modifying property directly from Hook Store is not allowed"),s=e("hook-action"),u=e("banque-module"),c={globalName:"$banque",autoToRef:!0,strict:!0};function a(t,o,e){Object.defineProperty(t,o,{get:e})}function l(t){return"function"==typeof t}function f(t,o){const e={};return a(e,u.toString(),(()=>!0)),Object.keys(t).forEach((n=>{const r=l(t[n])?function(t,o){function e(...e){return t.apply(o,[o,...e])}return a(e,s.toString(),(()=>!0)),e}(t[n],o):t[n];e[n]=r})),e}function d(o,e){const{autoToRef:n,strict:r}=e,u=function(...t){return t.reduce(((t,o)=>(...e)=>o(t(...e))))}(n?(o,e)=>t.toRef(o,e):(t,o)=>t[o],r?o=>t.readonly(o):t=>t);return new Proxy(o,{get(t,o,e){const n=Reflect.get(t,o,e);return function(t){return l(t)&&t[s.toString()]}(n)?n:u(t,o)},set:()=>(console.warn(i.toString()),!1)})}class p{options;rootState;constructor(t){this.options=this.getOptions(t),this.rootState={},this.initModules()}getOptions(t){return Object.assign(c,t)}initModules(){const{modules:t}=this.options;t?Object.keys(t).forEach((o=>{const e=t[o];let n;if(null!==(r=e)&&"object"==typeof r)n=this.createModule(e);else if(l(e)){const t=e;n=this.createModule(t())}var r;n&&this.bindModule(o,n)})):console.warn(r.toString())}createModule(t){const{rootState:o,options:e}=this;return d(f(t,o),e)}bindModule(o,e){const{rootState:n}=this;return e[u.toString()]?(a(n,o,(()=>t.readonly(e))),n[o]):e}install(t){const{options:o}=this;a(t.config.globalProperties,o.globalName,(()=>this.rootState)),t.provide(n,this.rootState)}inject(){return t.inject(n)}}exports.createBanque=function(t){return new p(t)};
//# sourceMappingURL=vue-banque.cjs.js.map
